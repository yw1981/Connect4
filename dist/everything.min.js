var gameLogic;!function(a){"use strict";function b(a,b){return angular.equals(a,b)}function c(a){return angular.copy(a)}function d(a){function b(b,c){return 0>b||0>c||b>=l||c>=m?0:a[b][c]}for(var c=0;l>c;c++)for(var d=0;m>d;d++)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c,d+1)&&b(c,d)===b(c,d+2)&&b(c,d)===b(c,d+3))return b(c,d);for(var c=0;l>c;c++)for(var d=0;m>d;d++)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c+1,d)&&b(c,d)===b(c+2,d)&&b(c,d)===b(c+3,d))return b(c,d);for(var c=0;l>c;c++)for(var d=0;m>d;d++)for(var e=-1;1>=e;e+=2)if(0!==b(c,d)&&""!==b(c,d)&&b(c,d)===b(c+1*e,d+1)&&b(c,d)===b(c+2*e,d+2)&&b(c,d)===b(c+3*e,d+3))return b(c,d);for(var c=0;l>c;c++)for(var d=0;m>d;d++)if(""===b(c,d))return""}function e(a){var b,c;for(b=0;5>b;b++)for(c=0;6>c;c++)if(""===a[b][c])return!1;return!0}function f(a,b){var c,d,e=[];for(c=0;6>c;c++)for(d=0;7>d;d++)try{e.push(g(a,c,d,b))}catch(f){}var h=e[Math.floor(Math.random()*e.length)];return h}function g(a,b,f,g){if(void 0===a&&(a=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),""!==a[b][f])throw new Error("One can only make a move in an empty position!");for(var h=0,i=5;i>=0;i--)""===a[i][f]&&h++;if(b!==h-1)throw new Error("One can only make a move in an correct position!");var j=c(a);j[b][f]=0===g?"R":"B";var k,l=d(j);return k=""!==l||e(a)?{endMatch:{endMatchScores:"R"===l?[1,0]:"B"===l?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-g}},[k,{set:{key:"board",value:j}},{set:{key:"delta",value:{row:b,col:f}}}]}function h(a,b,c){for(var d=[],e=b,f=a,h=0;h<c.length;h++){var i=c[h],j=g(e.board,i.row,i.col,f);d.push({stateBeforeMove:e,turnIndexBeforeMove:f,move:j,comment:{en:i.comment}}),e={board:j[1].set.value,delta:j[2].set.value},f=1-f}return d}function i(){return[h(0,{board:[["","","","","","",""],["","","","","","",""],["","","B","","","",""],["B","R","B","","","",""],["B","B","R","","","",""],["R","B","R","R","","",""]],delta:{row:3,col:0}},[{row:5,col:3,comment:"Find the position for R where he could win in his next turn by having a diagonal "},{row:2,col:2,comment:"B played here"},{row:2,col:0,comment:"R wins by placing here having 4 diagonal elements ."}]),h(1,{board:[["","","","","","",""],["","","","","","",""],["","","B","","","",""],["","R","B","","","",""],["","R","B","","","",""],["R","B","R","","","",""]],delta:{row:4,col:1}},[{row:2,col:2,comment:"B places here to make a vertical 4"},{row:3,col:1,comment:"R places  to have 4 in a row in subsequent moves"},{row:1,col:2,comment:"B wins by having 4 in a row!"}])]}function j(){return h(0,{},[{row:5,col:4,comment:"The classic opening is to put R in the middle"},{row:5,col:3,comment:"Place B adjacent to R"},{row:5,col:5,comment:"Place R next to original R"},{row:5,col:2,comment:"Place B to adjacent to the first one"},{row:4,col:5,comment:"Place R on top of 1 R"},{row:3,col:3,comment:"Place R on top of yellow to prevent from reaching 4"},{row:4,col:2,comment:"Place B on top of another B."},{row:3,col:2,comment:"place R on top of that as well"},{row:5,col:1,comment:"Place B here to create a 4 next time"},{row:5,col:0,comment:"R blocks from B to create a 4"},{row:4,col:1,comment:"Place B here to create a 4 next time "},{row:4,col:0,comment:"R blocks this as well to prevent B to create a 4"},{row:3,col:1,comment:"Place B here to create a vertical 4 next time"},{row:2,col:1,comment:"R prevents it by placing R on top of B"},{row:3,col:5,comment:"Place B on top of R here"},{row:4,col:4,comment:"R places here"},{row:5,col:6,comment:"Place B here"},{row:2,col:1,comment:"R wins by creating a diagonal  "}])}function k(a){var c=a.move,d=a.turnIndexBeforeMove,e=a.stateBeforeMove;try{var f=c[2].set.value,h=f.row,i=f.col,j=e.board;if(void 0===j&&(j=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),""!==j[h][i])return!1;for(var k=0,l=5;l>=0;l--)""===j[l][i]&&k++;if(h!==k-1)return!1;var m=g(j,h,i,d);if(!b(c,m))return!1}catch(n){return!1}return!0}var l=6,m=7;a.createComputerMove=f,a.createMove=g,a.getRiddles=i,a.getExampleGame=j,a.isMoveOk=k}(gameLogic||(gameLogic={}));var game;!function(a){"use strict";function b(){resizeGameAreaService.setWidthToHeight(1.16667),dragAndDropService.addDragListener("gameArea",p),gameService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:gameLogic.isMoveOk,updateUI:e})}function c(){gameService.makeMove(gameLogic.createComputerMove(a.board,a.turnIndex))}function d(a){for(var b=[],c=0;a>c;c++)b.push(c);return b}function e(b){a.board=b.stateAfterMove.board,a.delta=b.stateAfterMove.delta,void 0===a.board&&(a.board=[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]]),u=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.isYourTurn=b.turnIndexAfterMove>=0&&b.yourPlayerIndex===b.turnIndexAfterMove,a.turnIndex=b.turnIndexAfterMove,a.isYourTurn&&""===b.playersInfo[b.yourPlayerIndex].playerId&&(a.isYourTurn=!1,$timeout(c,1100))}function f(b,c){if(log.info(["Clicked on cell:",b,c],"isYourTurn ",a.isYourTurn),a.isYourTurn)try{var d=gameLogic.createMove(a.board,b,c,a.turnIndex);a.isYourTurn=!1,gameService.makeMove(d)}catch(e){return void log.info(["wrong move",b,c])}}function g(b,c){return void 0!==a.delta&&a.delta.row===b&&a.delta.col===c}function h(b,c){var d=a.board[b][c];return""!==d}function i(){return d(s)}function j(){return d(t)}function k(b,c){return"B"===a.board[b][c]?!0:!1}function l(b,c){return"R"===a.board[b][c]?!0:!1}function m(a,b){return(a+b)%2!==0?!0:!1}function n(a,b){return(a+b)%2===0?!0:!1}function o(b,c){var d=a.board[b][c];return"R"===d?"img/red.png":"B"===d?"img/blue.png":""}function p(a,b,c){function d(){return{width:k.clientWidth/t,height:k.clientHeight/s}}function e(a,b){var c=d();return{top:a*c.height,left:b*c.width}}function f(a,b){var c=d();return{x:b*c.width+c.width/2,y:a*c.height+c.height/2}}var g=document.getElementById("draggingLines"),h=document.getElementById("horizontalDraggingLine"),i=document.getElementById("verticalDraggingLine"),j=document.getElementById("clickToDragPiece"),k=document.getElementById("gameArea"),l=b-k.offsetLeft,m=c-k.offsetTop;if(0>l||0>m||l>=k.clientWidth||m>=k.clientHeight)return j.style.display="none",void(g.style.display="none");j.style.display="inline",g.style.display="inline";var n=Math.floor(t*l/k.clientWidth),o=Math.floor(s*m/k.clientHeight),p=f(o,n);i.setAttribute("x1",p.x),i.setAttribute("x2",p.x),h.setAttribute("y1",p.y),h.setAttribute("y2",p.y);var r=e(o,n);j.style.left=r.left+"px",j.style.top=r.top+"px",("touchend"===a||"touchcancel"===a||"touchleave"===a||"mouseup"===a)&&(j.style.display="none",g.style.display="none",q(o,n))}function q(a,b){log.info("Dragged to "+a+"x"+b),f(a,b)}function r(){return 1===a.turnIndex?"img/blue.png":"img/red.png"}a.isYourTurn=!1;var s=6,t=7,u=!1;a.init=b,e({stateAfterMove:{},turnIndexAfterMove:0,yourPlayerIndex:-2}),a.cellClicked=f,a.shouldSlowlyAppear=g,a.shouldShowImage=h,a.rows=i,a.cols=j,a.isWhite=k,a.isBlack=l,a.oddSum=m,a.evenSum=n,a.getImageSrc=o,a.getPreviewSrc=r}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_CONNECT4:"Rules of Connect4",RULES_SLIDE1:"Each player drops a disc of their color down a column. The disc can fall only on the lowest available spot in the column",RULES_SLIDE2:"The objective of the game is to connect four of one's own discs of the same color next to each other vertically, horizontally, or diagonally before your opponent",CLOSE:"Close"}),game.init()});
//# sourceMappingURL=everything.min.js.map